# üß≠ Runbook ‚Äì HNG Stage 3: Observability & Alerts

This document explains the alerts generated by the `alert_watcher` and how to respond.

---

## 1Ô∏è‚É£ Failover Alert

**Alert Example:**
`:arrows_counterclockwise: FAILOVER DETECTED ‚Äì Blue ‚Üí Green`

**Meaning:**
Nginx switched traffic from the active pool to the standby (e.g., Blue ‚Üí Green).  
This typically occurs when the active pool becomes unhealthy.

**Operator Action:**

1. Check logs of the failed pool (`docker logs app_blue` or `docker logs app_green`).
2. Identify root cause (crash, timeout, bad deploy).
3. Confirm standby pool (Green) is serving requests successfully.
4. Restore Blue after fix and manually re-toggle if needed.

---

## 2Ô∏è‚É£ High Error Rate Alert

**Alert Example:**
`:fire: HIGH ERROR RATE DETECTED`

**Meaning:**
The watcher detected more than the configured threshold (e.g., >2%) of 5xx errors within the recent request window.

**Operator Action:**

1. Inspect the upstream pool logs (`docker logs app_blue` or `docker logs app_green`).
2. If persistent, switch pools or scale down faulty container.
3. Confirm alerts stop after remediation.

---

## 3Ô∏è‚É£ Recovery Alert (Optional)

**Alert Example:**
`:white_check_mark: RECOVERY ‚Äì Errors back below threshold`

**Meaning:**
The upstream has recovered, and the error rate is back to normal.

**Operator Action:**

1. Confirm system stability.
2. No further action required.

---

## 4Ô∏è‚É£ Maintenance Mode

Set `MAINTENANCE_MODE=true` in `.env` to suppress alerts during planned restarts or deployments.
